import{x as a,r as e,y as l,P as s,H as r,ag as o,z as t,az as d,L as u,A as n}from"./vue-vendor-B0tYOcBV.js";import{a as m,_ as i}from"./_plugin-vue_export-helper-B34n5pss.js";import{a as p}from"./element-plus-C6e0990v.js";const c={class:"login-container"},f=i(a({__name:"LoginView",setup(a){const i=d(),f=e(),g=e(!1),v=e({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},w=async()=>{f.value&&await f.value.validate((async a=>{if(a)try{g.value=!0;const a=await m.post("/api/admins/login",v.value);200===a.data.code?(localStorage.setItem("access_token",a.data.data.access_token),localStorage.setItem("admin_id",a.data.data.admin_id),localStorage.setItem("username",a.data.data.username),p.success("登录成功"),i.push("/")):p.error(a.data.message||"登录失败")}catch(e){p.error("登录失败，请重试")}finally{g.value=!1}}))};return(a,e)=>{const d=o("el-input"),m=o("el-form-item"),i=o("el-button"),p=o("el-form"),h=o("el-card");return t(),l("div",c,[s(h,{class:"login-card"},{header:r((()=>e[2]||(e[2]=[n("div",{class:"card-header"},[n("h2",null,"后台管理系统")],-1)]))),default:r((()=>[s(p,{ref_key:"formRef",ref:f,model:v.value,rules:_,"label-width":"80px",class:"login-form"},{default:r((()=>[s(m,{label:"用户名",prop:"username"},{default:r((()=>[s(d,{modelValue:v.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>v.value.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),s(m,{label:"密码",prop:"password"},{default:r((()=>[s(d,{modelValue:v.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>v.value.password=a),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),s(m,null,{default:r((()=>[s(i,{type:"primary",onClick:w,loading:g.value,class:"login-button"},{default:r((()=>e[3]||(e[3]=[u(" 登录 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])}}}),[["__scopeId","data-v-44909014"]]);export{f as default};
